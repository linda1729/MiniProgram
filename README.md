## 一、实验目标

- 学习微信小程序云开发的基础知识。能够完成利用文本搜索的功能就好，图像识别、语音识别接口有时有问题，不强求。




## 二、实验步骤

### 2.1 实验前准备

- 下载仓库中的文件https://gitee.com/xxwan/garbage-sorting-applet（垃圾分类云程序的模版）。

- **获取智能识别免费资源**

  - 进入百度智能云https://console.bce.baidu.com/ai/?_=&fromai=1#/ai/imagerecognition/app/create并注册账号。

  - 创建一个新应用，复制`API Key`和`Sercet Key`.

    > <span style="color:#008b8d">后面需要在小程序中配置这两个参数。</span>


- 新建小程序，选择**云开发**（可免费领取一个月的云环境），**记录下云环境ID（即私人`env`）**。

  > <span style="color:#008b8d">`env`是微信程序开发中的参数，其决定由小程序云开发发起的调用会请求谁的云资源。</span>


### 2.2 改写程序

- **替换文件**，将如图的3个文件用在仓库中下载的垃圾分类模版替换。

- **替换代码**，依次在下列文件相应位置填写相应的`API Key`、`Sercet Key`、微信小程序的`APPID`、云环境`ID`。


  
### 2.3 部署

- **部署云函数**
  - 在`cloudfuntions`文件夹处勾选相应的云环境。
  - 将`cloudfuntions`下的四个子文件上传并部署(不上传node_modules)。

- **部署云数据库**
  - 点击小程序开发工具的**云开发**，点击**数据库**。
  - 创建集合`trash`, `type`，依次导入安装包的`trash.json`, `type.json`文件。（提前找资源下载）


## 三、程序运行结果

实现查询功能。


## 四、问题总结与体会

### 4.1 问题总结

**问题1：在部署云函数的时候发现一直无法上传。**

**方案：** 发现是主文件夹`cloudfuntions`没有勾选相应的环境，选择完即可上传。

### 4.2 体会

云开发给了我很不一样的感觉，没有想到小程序的设计还能以这样的方式抛开对后端的顾虑，专注于前端的实现。我以前写过一些传统前后端的小项目，流程通常是先搭好后端接口再让前端去调用。两边要不断沟通，接口改一点前端就要跟着改，进度很容易被卡住。而云开发把这些环节缩短了，我可以自己一边写前端一边用云函数处理逻辑，不需要等别人，也不会被卡死在接口对接上。

不过敲代码久了，突然回归使用可视化界面部署，确实有点点不适应呢。
